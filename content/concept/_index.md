---
title: "仕組みについて"
weight: 1
pre: "<b>1. </b>"
chapter: false
---

技術ドキュメントは全ての記述を変更することは多くありません。大抵幾つかの仕様が変更され、ドキュメントの修正が行われます。

事前にドキュメントを分割して翻訳しておけば、**変更された部分以外に関しては翻訳が既存のものを流用**できます。

本サービスはそれを利用したものです。

## 対訳作成の流れについて

Taiyaq は、以下の手順で対訳の作成を進めていきます。

ある翻訳したいサイトがあります。そこで新規の対訳作成を選ぶと以下の手順が始まります。

### 翻訳対象の分割

翻訳対象サイト を一定単位で分割します。同じコンテンツは同じ分割方法に従い毎回同じように分割されます。

![分割](images/concept01.png?width=30pc)

これによって翻訳対象を分割します。

### 分割情報のハッシュを作成する

![対訳情報](images/concept02.png?width=30pc)

対訳は前後の翻訳対象の[ハッシュ](https://ja.wikipedia.org/wiki/%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E9%96%A2%E6%95%B0)も記憶しておきます。つまり 1 つの対訳は次の情報を対訳とは別に保持します。

* 翻訳対象のハッシュ
* 翻訳対象の 1 つ前のハッシュ
* 翻訳対象の 1 つ後ろのハッシュ

これは後述する翻訳処理で使われます。

### 対訳の作成

上記分割した翻訳情報を翻訳して対訳をつくっていきます。

![対訳情報](images/concept03.png?width=30pc)

この情報をもとに対象サイトの翻訳を行います。

## 翻訳の流れについて

Taiyaq は以下の手順によって翻訳を行います。

ある翻訳したいサイトがあります。そこで翻訳を実行すると以下の手順が行われます。

### 対象サイトの分割

翻訳対象サイト を一定単位で分割します。同じコンテンツは同じ分割方法に従い毎回同じように分割されます。(対訳作成の分割と同じ)

![分割](images/concept04.png?width=30pc)

これによって翻訳元となる情報を作成します。

### 対応する対訳を使った翻訳を実行

翻訳を行います。但し前述したハッシュ情報を使い大きく３つのパターンに分けて翻訳を実行します。

#### 対応する対訳の検出 (完全一致)

これは前後の翻訳元のハッシュと翻訳対のハッシュ(3 つのハッシュ)が完全一致した場合に翻訳されます。完全一致なので最優先で翻訳を実行します。

![分割](images/concept05.png?width=30pc)

#### 対応する対訳の検出 (2 箇所一致)

これは前後何れかのハッシュが一致しない場合に翻訳を実行されます。これは前後何れかの翻訳元が変更された場合に実行されます。

部分一致でも翻訳を行いますが完全一致の翻訳が全て終わり残った翻訳対象に対して実行されます。

![分割](images/concept06.png?width=30pc)

#### 対応する対訳の検出 (前後不一致)

前後ともハッシュが一致しない場合に翻訳を実行しますこれは前述した**完全一致**, **2 個所一致** にて翻訳した残りの翻訳に対して実行されます。

{{% notice note %}}

この仕組みを逆用してタイトル、目次で共通の文言があった場合に敢えて未翻訳とすることで共通個所の翻訳に利用できます。

{{% /notice %}}

![分割](images/concept07.png?width=30pc)

#### 対応する対訳の検出 (全不一致)

全てのハッシュが一致しない場合に翻訳をしません。その対訳はもはや翻訳対象外となります。

![分割](images/concept08.png?width=30pc)

## 翻訳完了

上記ルールによって翻訳が実行されます。
